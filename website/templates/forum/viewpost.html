{%for post in posts.items%}
{% if loop.last and posts.has_next %}
<div hx-get="{{url_for('views.forum', page = posts.next_num)}}" hx-trigger="revealed" hx-swap="afterend">
{% else %}
  <div>
{%endif%}  
  <section>
      {% if post.anonymous==False %}
        <h3>{{postuser.query.filter_by(id=post.user_id).first().username }}</h3>
      {%else%}
        <h3>Anonymous</h3>
      {%endif%}

      {% if post.user_id==user.id%}
        <form action="{{ url_for('post.deletepost',postid=post.id) }}" class='deleteform' method="POST">
          <button class='deletebtn' action="submit">Delete {{post.id}}</button>
        </form>
        <form action="{{ url_for('post.editpost',postid=post.id) }}" method="GET">
          <button  id='editbtn' action="submit">Edit</button>
        </form>

    <!-- Image display -->
    <div class="images">
      {% set images=postimage.query.filter(postimage.post_id==post.id).all()%}
      {%if images%}
      {%for image in images %}
        <div class="image-display">
          <img src="{{url_for('static',filename='images/'+image.image)}}" width="200" alt="">
        </div>
      {%endfor%}
      {%endif%}
    </div>

    <!-- End image display -->


        <form action="{{url_for('comments.createcomment',postid=post.id,userid=current_user.id)}}" method="POST">
          <div class="form-group">
            <label for="comment">comment</label>
            <textarea id="comment" name="comment" rows="2" cols="30"></textarea>
            <button action="submit">comment</button>
          </div>
          
        </form>
      {% endif %}
        {{post.id}}
        {{post.title}}  
        <br>
        {{post.content}}
        <br>
        <a href="{{url_for('comments.show_comments',postid=post.id,userid=current_user.id)}}">View comments</a>
      </div>
  </section>
{%endfor%}